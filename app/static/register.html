<!DOCTYPE html>
<html>
<head>
    <title>Register | Chatterbox</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="card">
    <h2>Register</h2>

    <input id="username" placeholder="Username">
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">

    <button onclick="register()">Register</button>
    <p id="msg"></p>

    <p><a href="/">Back to Login</a></p>
</div>

<script>
async function register(){
    const user_name = document.getElementById("username").value;
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    const res = await fetch("/register",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({user_name, email, password})
    });

    const data = await res.json();
    document.getElementById("msg").innerText =
        res.ok ? "Registered successfully" : data.detail;
}
</script>

</body>
</html>
